var maxusers = gallerymaxpg;var isFirstUser = true;var maxusersbanned = okuserimage;var isFirstUserbanned = true;var alluserpgind = 1;var baneduserpgind = 1;var row;var crntpg = 1;$(function() {    $('.tooltipped').tooltip({delay: 50});    $('.modal-trigger').leanModal({        dismissible: true    });    $('#sidemenu a').on('click', function(e) {        e.preventDefault();        crntpg = 1;        if ($(this).hasClass('open')) {            // do nothing because the link is already open        } else {            var oldcontent = $('#sidemenu a.open').attr('href');            var newcontent = $(this).attr('href');            $(oldcontent).fadeOut('fast', function() {                $(newcontent).fadeIn().removeClass('hidden');                $(oldcontent).addClass('hidden');            });            $('#sidemenu a').removeClass('open');            $(this).addClass('open');        }    });    //paging ok    $('#btnmoreokusers').click(function() {        crntpg++;        $("#pagingbannedusers").hide();        $("#waiting").show();        var data1 = {idxid: 1, pgid: crntpg};        $.ajax({            url: siteurl + "adminuser/paging",            type: "POST",            data: data1,            success: function(data) {                $("#pagingbannedusers").show();                $("#waiting").hide();                $('#allokusers').append(data);            },            error: function() {                $("#pagingbannedusers").show();                $("#waiting").hide();                //alert("error");//            }        });    });    //paging ban    $('#btnmorebanedusers').click(function() {        crntpg++;        $("#pagingbannedusers").show();        $("#waiting").hide();        var data1 = {idxid: 2, pgid: crntpg};        $.ajax({            url: siteurl + "adminuser/paging",            type: "POST",            data: data1,            success: function(data) {                $("#pagingbannedusers").show();                $("#waiting").hide();                $('#allbanedusers').append(data);            },            error: function() {                $("#pagingbannedusers").show();                $("#waiting").hide();                //alert("error");//            }        });    });    $('#showokuser').click(function() {        $.ajax({url: siteurl + 'adminuser/loadactusers',            type: 'POST',            success: function(result) {                crntpg = 1;                $('#allokusers').html(result);            }});    })    $('#showbanuser').click(function() {        $.ajax({url: siteurl + 'adminuser/loadbanuser',            type: 'POST',            success: function(result) {                crntpg = 1;                $('#allbanedusers').html(result);            }});    })    //More Info    $('.usersdiv,.searchdiv').on('click', '.moreinf', function() {        //$('#userstatus').html($(this).parent('.card').find('.card-content').find('.status') .html());        $('#idformuser').val($(this).parents('.card').find('.card-content').find('.id').html());        $('#usercodemeli').html($(this).parents('.card').find('.card-content').find('.codem').html());        $('#usertel').html($(this).parents('.card').find('.card-content').find('.tel').html());        $('#useraddr').html($(this).parents('.card').find('.card-content').find('.addr').html());        $('#userpostcode').html($(this).parents('.card').find('.card-content').find('.codp').html());        $('#simpleuser').removeAttr('disabled');        $('#davaruser').removeAttr('disabled');        $('#bazbinuser').removeAttr('disabled');//        $('#bazbinnuser').removeAttr('disabled');//        $('#rahbaruser').removeAttr('disabled');        $('#adminuser').removeAttr('disabled');        $('#msgerrrol').hide();        $('#msgokrol').hide();        $('#submituser').show();        var role = $(this).parents('.card').find('.card-content').find('.role').html();        $("[name=role]").val([role]);        row = $(this);        $('#modalmoreinfo').openModal();    });    $('#btnclosemore').click(function() {        $('#modalmoreinfo').closeModal();    })    //Paging//    var optInit = {//        callback: pageuserCallback,//        items_per_page: 1,//        num_display_entries: 4,//        current_page: 0,//        num_edge_entries: 2,//        link_to: "#",//        prev_text: null,//        next_text: null,//        ellipse_text: "...",//        prev_show_always: true,//        next_show_always: true//    };//    $('#pagingusers').pagination(maxusers, optInit);////    function pageuserCallback(page_index, jq) {//        if (isFirstUser != true) {//            alluserpgind=page_index + 1;//            var data={idxid:1, pgid:page_index + 1 };//            $.ajax({url: siteurl+'adminuser/paging',//                data: data,//                type: 'POST',//                dataType: 'json',//                success: function(result) {//                    if (result.id > 0) {//                       $('#allokusers').html(result.msg);//                    }//                }});//        }//        else {//            isFirstUser = false;//        }////    }    //Paging banned users//    optInit = {//        callback: pageuserBannedCallback,//        items_per_page: 1,//        num_display_entries: 4,//        current_page: 0,//        num_edge_entries: 2,//        link_to: "#",//        prev_text: null,//        next_text: null,//        ellipse_text: "...",//        prev_show_always: true,//        next_show_always: true//    };//    $('#pagingbannedusers').pagination(maxusersbanned, optInit);////    function pageuserBannedCallback(page_index, jq) {//        if (isFirstUserbanned != true) {//            baneduserpgind=page_index + 1;//            var data={idxid:2, pgid:page_index + 1 };//            $.ajax({url: siteurl+'adminuser/paging',//                data: data,//                type: 'POST',//                dataType: 'json',//                success: function(result) {//                    if (result.id > 0) {//                       $('#allbanedusers').html(result.msg);//                    }//                }});//        }//        else {//            isFirstUserbanned = false;//        }////    }    //Ban User     $('.usersdiv').on('click', '.banuser', function() {        var userid = $(this).parents('.card').find('.card-content').find('.id').html();        var that = $(this);        var data = {userid: userid};        $.ajax({url: siteurl + 'adminuser/makeban',            data: data,            type: 'POST',            dataType: 'json',            success: function(result) {                if (result.id > 0) {                    that.parents('.card').remove();                }            }});    });    //banned tab    //More Info    $('.bannedusersdiv').on('click', '.moreinf', function() {        // $('#userstatus').html($(this).parent('.card').find('.card-content').find('.status').html());        $('#idformuser').val($(this).parents('.card').find('.card-content').find('.id').html());        $('#usercodemeli').html($(this).parents('.card').find('.card-content').find('.codem').html());        $('#usertel').html($(this).parents('.card').find('.card-content').find('.tel').html());        $('#useraddr').html($(this).parents('.card').find('.card-content').find('.addr').html());        $('#userpostcode').html($(this).parents('.card').find('.card-content').find('.codp').html());        var role = $(this).parents('.card').find('.card-content').find('.role').html();        $("[name=role]").val([role]);        $('#simpleuser').attr('disabled', 'disabled');        $('#davaruser').attr('disabled', 'disabled');        $('#bazbinuser').attr('disabled', 'disabled');//        $('#bazbinnuser').attr('disabled', 'disabled');//        $('#rahbaruser').attr('disabled', 'disabled');        $('#adminuser').attr('disabled', 'disabled');        $('#submituser').hide();        $('#modalmoreinfo').openModal();    });    $('.bannedusersdiv').on('click', '.notbanuser', function() {        var userid = $(this).parents('.card').find('.card-content').find('.id').html();        var that = $(this);        var data = {userid: userid};        $.ajax({url: siteurl + 'adminuser/makeunban',            data: data,            type: 'POST',            dataType: 'json',            success: function(result) {                if (result.id > 0) {                    that.parents('.card').remove();                }            }});    });    $('#submituser').click(function() {        var data = $('#formchangerole').serialize();        $.ajax({url: siteurl + 'adminuser/changerole',            data: data,            type: 'POST',            dataType: 'json',            success: function(result) {                if (result.id == 0) {                    $('#msgerrrol').html(result.msg);                    $('#msgerrrol').show();                    $('#msgokrol').hide();                } else if (result.id == 1) {                    //alert(row.closest('.card').find('#status').find('span').html());                    //var row = $($('[id="idformuser"]').val());                    row.closest('.card').find('#status').find('span').html(result.role);                    row.closest('.card').find('.role').html(result.roleid);                    $('#msgokrol').html(result.msg);                    $('#msgerrrol').hide();                    $('#msgokrol').show();                }            }});    })    $('#submitusersearch').click(function() {        var data = $('#formsearchuser').serialize();        $.ajax({url: siteurl + 'adminuser/searchuser',            data: data,            type: 'POST',            dataType: 'json',            success: function(result) {                if (result.id == 0) {                    $('#msgsearch').html(result.msg);                    $('#msgsearch').show();                } else if (result.id == 1) {                    $('#searchresult').html(result.msg);                    $('#msgsearch').hide();                }            }});    })    $('.searchdiv').on('click', '.notbanuser', function() {        var userid = $(this).parents('.card').find('.card-content').find('.id').html();        var btn = $(this).parents('.card').find('.notbanuser');        var data = {userid: userid};        $.ajax({url: siteurl + 'adminuser/makeunban',            data: data,            type: 'POST',            dataType: 'json',            success: function(result) {                if (result.id > 0) {                    btn.parents('.card').find('.card-action').append('<a class="banuser waves-effect waves-light btn left pink darken-3"><i class="mdi-action-delete right"></i>حذف</a>');                    btn.remove();                }            }});    });    $('.searchdiv').on('click', '.banuser', function() {        var userid = $(this).parents('.card').find('.card-content').find('.id').html();        var btn = $(this).parents('.card').find('.banuser');        var data = {userid: userid};        $.ajax({url: siteurl + 'adminuser/makeban',            data: data,            type: 'POST',            dataType: 'json',            success: function(result) {                if (result.id > 0) {                    btn.parents('.card').find('.card-action').append('<a class="notbanuser waves-effect waves-light btn left blue-grey darken-2"><i class="mdi-action-cached right"></i>فعال کردن</a>');                    btn.remove();                }            }});    });});